{"ast":null,"code":"var _jsxFileName = \"/Users/andresbayona/Documents/DevekCodeTest/Frontend/devek/src/components/Chat/ChatRoom.tsx\",\n  _s = $RefreshSig$();\n// ChatRoom.tsx\nimport React, { useState } from 'react';\nimport { Box, Container, Typography } from '@mui/material';\nimport Message from './Message';\nimport { API_HOST } from '../../hooks/UseFetch';\nimport { useAuth } from \"../../contexts/UserContext\";\nimport { useFetch } from \"../../hooks/UseFetch\";\nimport { useSocket } from '../../contexts/ChatRoomsContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function generateRequest({\n  updateTrigger,\n  setUpdateTrigger,\n  setData,\n  token,\n  user,\n  endpoint,\n  queryParams\n}) {\n  return {\n    triggerRequest: updateTrigger,\n    callback: data => {\n      setUpdateTrigger(false);\n      setData(data);\n    },\n    method: \"GET\",\n    headers: {\n      \"Authorization\": `Bearer ${token}`,\n      \"Content-Type\": \"application/json\",\n      \"X-Consumer-Custom-Id\": String(user)\n    },\n    endpoint: `${API_HOST}/${endpoint}?${queryParams}`,\n    payload: null\n  };\n}\nconst ChatRoom = ({\n  room\n}) => {\n  _s();\n  const [oldMessages, setOldMessages] = useState([]);\n  const {\n    getMessagesByRoom\n  } = useSocket();\n  const [updateTrigger, setUpdateTrigger] = useState(false);\n  const newMessages = getMessagesByRoom(room);\n  const {\n    token\n  } = useAuth();\n  const {\n    user\n  } = useAuth();\n  const oldMessagesParams = {\n    updateTrigger,\n    setUpdateTrigger,\n    setData: setOldMessages,\n    token,\n    user,\n    endpoint: \"\",\n    queryParams: \"\"\n  };\n  const req = generateRequest(oldMessagesParams);\n  const [error, isLoading] = useFetch(req);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        my: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        gutterBottom: true,\n        children: room\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          maxHeight: '400px',\n          overflowY: 'auto',\n          mb: 2\n        },\n        children: newMessages.map((msg, index) => /*#__PURE__*/_jsxDEV(Message, {\n          sender: msg.sender,\n          text: msg.text,\n          timestamp: msg.date\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatRoom, \"crATOJA72XdkGMBlZ28Rf6N7hOY=\", false, function () {\n  return [useSocket, useAuth, useAuth, useFetch];\n});\n_c = ChatRoom;\nexport default ChatRoom;\nvar _c;\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"names":["React","useState","Box","Container","Typography","Message","API_HOST","useAuth","useFetch","useSocket","jsxDEV","_jsxDEV","generateRequest","updateTrigger","setUpdateTrigger","setData","token","user","endpoint","queryParams","triggerRequest","callback","data","method","headers","String","payload","ChatRoom","room","_s","oldMessages","setOldMessages","getMessagesByRoom","newMessages","oldMessagesParams","req","error","isLoading","children","sx","my","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","maxHeight","overflowY","mb","map","msg","index","sender","text","timestamp","date","_c","$RefreshReg$"],"sources":["/Users/andresbayona/Documents/DevekCodeTest/Frontend/devek/src/components/Chat/ChatRoom.tsx"],"sourcesContent":["// ChatRoom.tsx\nimport React, { useState } from 'react';\nimport { Box, TextField, Button, Container, Typography, Grid } from '@mui/material';\nimport Message from './Message';\nimport { API_HOST } from '../../hooks/UseFetch';\nimport {useAuth} from \"../../contexts/UserContext\";\nimport {FetchRequest, useFetch} from \"../../hooks/UseFetch\";\nimport { useSocket } from '../../contexts/ChatRoomsContext';\ninterface ChatRoomProps {\n  room: string;\n}\n\ninterface ChatMessage {\n  sender: string;\n  text: string;\n  timestamp: string;\n}\n\ntype Request = {\n    updateTrigger: boolean;\n    setUpdateTrigger: (value: boolean) => void;\n    setData: (data: ChatMessage[]) => void; \n    token: string;\n    user: string | null;\n    endpoint: string;\n    queryParams: string;\n  };\n  \n  export function generateRequest({\n    updateTrigger,\n    setUpdateTrigger,\n    setData,\n    token,\n    user,\n    endpoint,\n    queryParams,\n  }: Request) {\n    return {\n      triggerRequest: updateTrigger,\n      callback: (data: any) => {\n        setUpdateTrigger(false);\n        setData(data);\n      },\n      method: \"GET\",\n      headers: {\n        \"Authorization\": `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n        \"X-Consumer-Custom-Id\": String(user),\n      },\n    \n      endpoint: `${API_HOST}/${endpoint}?${queryParams}`,\n      payload: null,\n    };\n  }\n  \n\n\nconst ChatRoom: React.FC<ChatRoomProps> = ({ room }) => {\n\n  const [oldMessages, setOldMessages] = useState<ChatMessage[]>([]);\n  const {getMessagesByRoom} = useSocket();\n  const [updateTrigger, setUpdateTrigger] = useState<boolean>(false);\n  const newMessages = getMessagesByRoom(room);\n\n  const {token} = useAuth();\n  const {user} = useAuth();\n\n  const oldMessagesParams: Request = {updateTrigger, setUpdateTrigger, setData: setOldMessages, token, user, endpoint: \"\", queryParams: \"\" };\n\n   const req: FetchRequest = generateRequest(oldMessagesParams);\n   const [error, isLoading] = useFetch(req);\n\n\n  return (\n    <Container>\n      <Box sx={{ my: 2 }}>\n        <Typography variant=\"h4\" gutterBottom>\n          {room}\n        </Typography>\n        <Box sx={{ maxHeight: '400px', overflowY: 'auto', mb: 2 }}>\n          {newMessages.map((msg, index) => (\n            <Message\n              key={index}\n              sender={msg.sender}\n              text={msg.text}\n              timestamp={msg.date}\n            />\n          ))}\n        </Box>\n\n      </Box>\n    </Container>\n  );\n};\n\n\n\n\nexport default ChatRoom;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}