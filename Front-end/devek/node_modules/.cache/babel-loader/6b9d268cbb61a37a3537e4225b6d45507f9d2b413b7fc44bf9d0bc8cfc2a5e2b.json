{"ast":null,"code":"import{useContext,createContext,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";// Create context with default undefined value\nconst UserContext=/*#__PURE__*/createContext(undefined);const UserProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(localStorage.getItem(\"user\"));const[role,setRole]=useState(localStorage.getItem(\"role\"));const[token,setToken]=useState(localStorage.getItem(\"site\")||\"\");console.log(user);const navigate=useNavigate();const loginAction=data=>{try{if(data){setUser(data.user.email);setToken(data.token);setRole(data.user.role);localStorage.setItem(\"site\",data.token);localStorage.setItem(\"user\",data.user.email);localStorage.setItem(\"role\",data.user.role);navigate(\"/home\");return;}throw new Error(\"Invalid login data\");}catch(err){console.error(err);}};const logOut=()=>{setUser(null);setToken(\"\");setRole(null);localStorage.removeItem(\"site\");localStorage.removeItem(\"user\");localStorage.removeItem(\"role\");navigate(\"/login\");};return/*#__PURE__*/_jsx(UserContext.Provider,{value:{token,user,role,loginAction,logOut},children:children});};export default UserProvider;// Custom hook for consuming the context\nexport const useAuth=()=>{const context=useContext(UserContext);if(!context){throw new Error(\"useAuth must be used within a UserProvider\");}return context;};","map":{"version":3,"names":["useContext","createContext","useState","useNavigate","jsx","_jsx","UserContext","undefined","UserProvider","_ref","children","user","setUser","localStorage","getItem","role","setRole","token","setToken","console","log","navigate","loginAction","data","email","setItem","Error","err","error","logOut","removeItem","Provider","value","useAuth","context"],"sources":["/Users/andresbayona/Documents/DevekRepo/devekCodeTest/Frontend/devek/src/contexts/UserContext.tsx"],"sourcesContent":["import { useContext, createContext, useState, ReactNode } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\ninterface User {\n  email: string;\n  role: string;\n}\n\ninterface AuthData {\n  token: string;\n  user: User;\n}\n\ninterface UserContextType {\n  token: string;\n  user: string | null;\n  role: string | null;\n  loginAction: (data: AuthData) => void;\n  logOut: () => void;\n}\n\n// Create context with default undefined value\nconst UserContext = createContext<UserContextType | undefined>(undefined);\n\ninterface UserProviderProps {\n  children: ReactNode;\n}\n\nconst UserProvider: React.FC<UserProviderProps> = ({ children }) => {\n  const [user, setUser] = useState<string | null>(localStorage.getItem(\"user\"));\n  const [role, setRole] = useState<string | null>(localStorage.getItem(\"role\"));\n  const [token, setToken] = useState<string>(localStorage.getItem(\"site\") || \"\");\n  console.log(user);\n\n  const navigate = useNavigate();\n\n  const loginAction = (data: AuthData) => {\n    try {\n      if (data) {\n        setUser(data.user.email);\n        setToken(data.token);\n        setRole(data.user.role);\n        localStorage.setItem(\"site\", data.token);\n        localStorage.setItem(\"user\", data.user.email);\n        localStorage.setItem(\"role\", data.user.role);\n        navigate(\"/home\");\n        return;\n      }\n      throw new Error(\"Invalid login data\");\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const logOut = () => {\n    setUser(null);\n    setToken(\"\");\n    setRole(null);\n    localStorage.removeItem(\"site\");\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"role\");\n    navigate(\"/login\");\n  };\n\n  return (\n    <UserContext.Provider value={{ token, user, role, loginAction, logOut }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport default UserProvider;\n\n// Custom hook for consuming the context\nexport const useAuth = (): UserContextType => {\n  const context = useContext(UserContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within a UserProvider\");\n  }\n  return context;\n};\n"],"mappings":"AAAA,OAASA,UAAU,CAAEC,aAAa,CAAEC,QAAQ,KAAmB,OAAO,CACtE,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAoB/C;AACA,KAAM,CAAAC,WAAW,cAAGL,aAAa,CAA8BM,SAAS,CAAC,CAMzE,KAAM,CAAAC,YAAyC,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC7D,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAgBW,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAC7E,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAgBW,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAC7E,KAAM,CAACG,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAASW,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,EAAI,EAAE,CAAC,CAC9EK,OAAO,CAACC,GAAG,CAACT,IAAI,CAAC,CAEjB,KAAM,CAAAU,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAmB,WAAW,CAAIC,IAAc,EAAK,CACtC,GAAI,CACF,GAAIA,IAAI,CAAE,CACRX,OAAO,CAACW,IAAI,CAACZ,IAAI,CAACa,KAAK,CAAC,CACxBN,QAAQ,CAACK,IAAI,CAACN,KAAK,CAAC,CACpBD,OAAO,CAACO,IAAI,CAACZ,IAAI,CAACI,IAAI,CAAC,CACvBF,YAAY,CAACY,OAAO,CAAC,MAAM,CAAEF,IAAI,CAACN,KAAK,CAAC,CACxCJ,YAAY,CAACY,OAAO,CAAC,MAAM,CAAEF,IAAI,CAACZ,IAAI,CAACa,KAAK,CAAC,CAC7CX,YAAY,CAACY,OAAO,CAAC,MAAM,CAAEF,IAAI,CAACZ,IAAI,CAACI,IAAI,CAAC,CAC5CM,QAAQ,CAAC,OAAO,CAAC,CACjB,OACF,CACA,KAAM,IAAI,CAAAK,KAAK,CAAC,oBAAoB,CAAC,CACvC,CAAE,MAAOC,GAAG,CAAE,CACZR,OAAO,CAACS,KAAK,CAACD,GAAG,CAAC,CACpB,CACF,CAAC,CAED,KAAM,CAAAE,MAAM,CAAGA,CAAA,GAAM,CACnBjB,OAAO,CAAC,IAAI,CAAC,CACbM,QAAQ,CAAC,EAAE,CAAC,CACZF,OAAO,CAAC,IAAI,CAAC,CACbH,YAAY,CAACiB,UAAU,CAAC,MAAM,CAAC,CAC/BjB,YAAY,CAACiB,UAAU,CAAC,MAAM,CAAC,CAC/BjB,YAAY,CAACiB,UAAU,CAAC,MAAM,CAAC,CAC/BT,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAED,mBACEhB,IAAA,CAACC,WAAW,CAACyB,QAAQ,EAACC,KAAK,CAAE,CAAEf,KAAK,CAAEN,IAAI,CAAEI,IAAI,CAAEO,WAAW,CAAEO,MAAO,CAAE,CAAAnB,QAAA,CACrEA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,cAAe,CAAAF,YAAY,CAE3B;AACA,MAAO,MAAM,CAAAyB,OAAO,CAAGA,CAAA,GAAuB,CAC5C,KAAM,CAAAC,OAAO,CAAGlC,UAAU,CAACM,WAAW,CAAC,CACvC,GAAI,CAAC4B,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAR,KAAK,CAAC,4CAA4C,CAAC,CAC/D,CACA,MAAO,CAAAQ,OAAO,CAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}