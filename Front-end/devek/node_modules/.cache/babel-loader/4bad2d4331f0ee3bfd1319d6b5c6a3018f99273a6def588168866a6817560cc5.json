{"ast":null,"code":"var _jsxFileName = \"/Users/andresbayona/Documents/DevekCodeTest/Frontend/devek/src/contexts/UserContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useContext, createContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Create context with default undefined value\nconst UserContext = /*#__PURE__*/createContext(undefined);\nconst UserProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(localStorage.getItem(\"user\"));\n  const [role, setRole] = useState(localStorage.getItem(\"role\"));\n  const [token, setToken] = useState(localStorage.getItem(\"site\") || \"\");\n  const navigate = useNavigate();\n  const loginAction = data => {\n    try {\n      if (data) {\n        setUser(data.user.email);\n        setToken(data.token);\n        setRole(data.user.role);\n        localStorage.setItem(\"site\", data.token);\n        localStorage.setItem(\"user\", data.user.email);\n        localStorage.setItem(\"role\", data.user.role);\n        navigate(\"/home\");\n        return;\n      }\n      throw new Error(\"Invalid login data\");\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const logOut = () => {\n    setUser(null);\n    setToken(\"\");\n    setRole(null);\n    localStorage.removeItem(\"site\");\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"role\");\n    navigate(\"/login\");\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      token,\n      user,\n      role,\n      loginAction,\n      logOut\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(UserProvider, \"wYlv+j6IfjLpVWWrzq9TWPxlmhk=\", false, function () {\n  return [useNavigate];\n});\n_c = UserProvider;\nexport default UserProvider;\n\n// Custom hook for consuming the context\nexport const useAuth = () => {\n  _s2();\n  const context = useContext(UserContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within a UserProvider\");\n  }\n  return context;\n};\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["useContext","createContext","useState","useNavigate","jsxDEV","_jsxDEV","UserContext","undefined","UserProvider","children","_s","user","setUser","localStorage","getItem","role","setRole","token","setToken","navigate","loginAction","data","email","setItem","Error","err","console","error","logOut","removeItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","$RefreshReg$"],"sources":["/Users/andresbayona/Documents/DevekCodeTest/Frontend/devek/src/contexts/UserContext.tsx"],"sourcesContent":["import { useContext, createContext, useState, ReactNode } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\ninterface User {\n  email: string;\n  role: string;\n}\n\ninterface AuthData {\n  token: string;\n  user: User;\n}\n\ninterface UserContextType {\n  token: string;\n  user: string | null;\n  role: string | null;\n  loginAction: (data: AuthData) => void;\n  logOut: () => void;\n}\n\n// Create context with default undefined value\nconst UserContext = createContext<UserContextType | undefined>(undefined);\n\ninterface UserProviderProps {\n  children: ReactNode;\n}\n\nconst UserProvider: React.FC<UserProviderProps> = ({ children }) => {\n  const [user, setUser] = useState<string | null>(localStorage.getItem(\"user\"));\n  const [role, setRole] = useState<string | null>(localStorage.getItem(\"role\"));\n  const [token, setToken] = useState<string>(localStorage.getItem(\"site\") || \"\");\n  \n\n  const navigate = useNavigate();\n\n  const loginAction = (data: AuthData) => {\n    try {\n      if (data) {\n        setUser(data.user.email);\n        setToken(data.token);\n        setRole(data.user.role);\n        localStorage.setItem(\"site\", data.token);\n        localStorage.setItem(\"user\", data.user.email);\n        localStorage.setItem(\"role\", data.user.role);\n        navigate(\"/home\");\n        return;\n      }\n      throw new Error(\"Invalid login data\");\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const logOut = () => {\n    setUser(null);\n    setToken(\"\");\n    setRole(null);\n    localStorage.removeItem(\"site\");\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"role\");\n    navigate(\"/login\");\n  };\n\n  return (\n    <UserContext.Provider value={{ token, user, role, loginAction, logOut }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport default UserProvider;\n\n// Custom hook for consuming the context\nexport const useAuth = (): UserContextType => {\n  const context = useContext(UserContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within a UserProvider\");\n  }\n  return context;\n};\n"],"mappings":";;;AAAA,SAASA,UAAU,EAAEC,aAAa,EAAEC,QAAQ,QAAmB,OAAO;AACtE,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAoB/C;AACA,MAAMC,WAAW,gBAAGL,aAAa,CAA8BM,SAAS,CAAC;AAMzE,MAAMC,YAAyC,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAClE,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAgBW,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EAC7E,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAgBW,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EAC7E,MAAM,CAACG,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAASW,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;EAG9E,MAAMK,QAAQ,GAAGhB,WAAW,CAAC,CAAC;EAE9B,MAAMiB,WAAW,GAAIC,IAAc,IAAK;IACtC,IAAI;MACF,IAAIA,IAAI,EAAE;QACRT,OAAO,CAACS,IAAI,CAACV,IAAI,CAACW,KAAK,CAAC;QACxBJ,QAAQ,CAACG,IAAI,CAACJ,KAAK,CAAC;QACpBD,OAAO,CAACK,IAAI,CAACV,IAAI,CAACI,IAAI,CAAC;QACvBF,YAAY,CAACU,OAAO,CAAC,MAAM,EAAEF,IAAI,CAACJ,KAAK,CAAC;QACxCJ,YAAY,CAACU,OAAO,CAAC,MAAM,EAAEF,IAAI,CAACV,IAAI,CAACW,KAAK,CAAC;QAC7CT,YAAY,CAACU,OAAO,CAAC,MAAM,EAAEF,IAAI,CAACV,IAAI,CAACI,IAAI,CAAC;QAC5CI,QAAQ,CAAC,OAAO,CAAC;QACjB;MACF;MACA,MAAM,IAAIK,KAAK,CAAC,oBAAoB,CAAC;IACvC,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IACpB;EACF,CAAC;EAED,MAAMG,MAAM,GAAGA,CAAA,KAAM;IACnBhB,OAAO,CAAC,IAAI,CAAC;IACbM,QAAQ,CAAC,EAAE,CAAC;IACZF,OAAO,CAAC,IAAI,CAAC;IACbH,YAAY,CAACgB,UAAU,CAAC,MAAM,CAAC;IAC/BhB,YAAY,CAACgB,UAAU,CAAC,MAAM,CAAC;IAC/BhB,YAAY,CAACgB,UAAU,CAAC,MAAM,CAAC;IAC/BV,QAAQ,CAAC,QAAQ,CAAC;EACpB,CAAC;EAED,oBACEd,OAAA,CAACC,WAAW,CAACwB,QAAQ;IAACC,KAAK,EAAE;MAAEd,KAAK;MAAEN,IAAI;MAAEI,IAAI;MAAEK,WAAW;MAAEQ;IAAO,CAAE;IAAAnB,QAAA,EACrEA;EAAQ;IAAAuB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACzB,EAAA,CAzCIF,YAAyC;EAAA,QAM5BL,WAAW;AAAA;AAAAiC,EAAA,GANxB5B,YAAyC;AA2C/C,eAAeA,YAAY;;AAE3B;AACA,OAAO,MAAM6B,OAAO,GAAGA,CAAA,KAAuB;EAAAC,GAAA;EAC5C,MAAMC,OAAO,GAAGvC,UAAU,CAACM,WAAW,CAAC;EACvC,IAAI,CAACiC,OAAO,EAAE;IACZ,MAAM,IAAIf,KAAK,CAAC,4CAA4C,CAAC;EAC/D;EACA,OAAOe,OAAO;AAChB,CAAC;AAACD,GAAA,CANWD,OAAO;AAAA,IAAAD,EAAA;AAAAI,YAAA,CAAAJ,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}